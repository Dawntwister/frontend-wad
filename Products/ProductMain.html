<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../stylesheet_master.css">

    <!-- VUE -->
    <script src="https://unpkg.com/vue@next"></script>

    <!-- Theme switching functionality -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../themeswitch.js"></script>
    <!-- End theme switching functionality -->

    <!-- ENTER ADDITIONAL SCRIPTS-->
    <script type="module">

        // JOEL'S CODE STARTS HERE
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCcH1GXtjhCUF6Mi43YMz9sJ22H4Xqn5tM",
            authDomain: "farmers-ground---wad-2.firebaseapp.com",
            databaseURL: "https://farmers-ground---wad-2-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "farmers-ground---wad-2",
            storageBucket: "farmers-ground---wad-2.appspot.com",
            messagingSenderId: "16212184222",
            appId: "1:16212184222:web:87c88f3d7a15b82d147f8f"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore();

        // Get All Products
        const list_objects = {};
        const querySnapshot = await getDocs(collection(db, "groceryItems"));
        querySnapshot.forEach((doc) => {
            // doc.data() is never undefined for query doc snapshots
            list_objects[doc.id] = doc.data();
        });


        // Assuming you have an object list_objects
        const ulElement = document.getElementById('product_list');

        for (const [key, value] of Object.entries(list_objects)) {
            const liElement = document.createElement('li');
            liElement.textContent = `${key}: ${JSON.stringify(value)}`;
            ulElement.appendChild(liElement);
        }
        // JOEL'S CODE ENDS HERE

    </script>
    <!-- END ADDITIONAL SCRIPTS -->
</head>

<body>
    <div id="root">
        <fg_top_green></fg_top_green>
        <fg_top_grey></fg_top_grey>
        <!--  -->
        <!-- ENTER CONTENT-->
        <div class="container-fluid background-style" id="page">
            <div class="container-fluid">
                <div class="row my-2" id="linkbar">
                    <div class="justify-content-left link-bar">
                        <nav class="link-bar">
                            <a href="home">Home</a>
                            <span>&gt;</span>
                            <a href="products">Products</a>
                        </nav>
                    </div>
                </div>

                <div class="row white-box text-dark my-3" id="product">
                    <div class="col-8">
                        <b>Products</b>
                    </div>
                    <div class="col-4 text-end">
                        <form class="d-flex" role="search">
                            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                            <button class="btn btn-outline-primary" type="submit">Search</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="container-fluid my-5">
                <div class="row justify-content-evenly" id="product_bar">
                    <producttype-component v-for="(value, producttype_name) in product_types"
                        v-bind:name="producttype_name" v-bind:details="value.details">
                    </producttype-component>
                </div>
            </div>


            <!-- JOEL CODE -->
            <div>
                <ul id="product_list">

                </ul>
            </div>
            <!-- JOEL CODE -->








        </div>
        <!-- END CONTENT -->
        <!--  -->
        <fg_bot></fg_bot>
    </div>
</body>

<!-- ENTER ADDITIONAL SCRIPTS -->
<!-- END ADDITIONAL SCRIPTS -->

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
<script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
<script src="../assets/js/color-modes.js"></script>
<script src="../components.vue"></script>
<script src="../sessionstorage.js"></script>

</html>